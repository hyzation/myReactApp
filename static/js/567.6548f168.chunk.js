"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[567],{4281:function(e,t,n){n.d(t,{i:function(){return c}});var r=n(9439),o=n(2791),i=n(2654),a=n(3144),u=n(5671),l=n(4942),s=(0,a.Z)((function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math;(0,u.Z)(this,e),(0,l.Z)(this,"grad3",[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]]),(0,l.Z)(this,"grad4",[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]]),(0,l.Z)(this,"p",[]),(0,l.Z)(this,"perm",[]),(0,l.Z)(this,"simplex",[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]),(0,l.Z)(this,"dot",(function(e,t,n){return e[0]*t+e[1]*n})),(0,l.Z)(this,"dot3",(function(e,t,n,r){return e[0]*t+e[1]*n+e[2]*r})),(0,l.Z)(this,"dot4",(function(e,t,n,r,o){return e[0]*t+e[1]*n+e[2]*r+e[3]*o})),(0,l.Z)(this,"noise",(function(e,n){var r=(e+n)*(.5*(Math.sqrt(3)-1)),o=Math.floor(e+r),i=Math.floor(n+r),a=(3-Math.sqrt(3))/6,u=(o+i)*a,l=e-(o-u),s=n-(i-u),c=0,f=1;l>s&&(c=1,f=0);var d=l-c+a,h=s-f+a,m=l-1+2*a,v=s-1+2*a,p=255&o,g=255&i,x=t.perm[p+t.perm[g]]%12,y=t.perm[p+c+t.perm[g+f]]%12,_=t.perm[p+1+t.perm[g+1]]%12,w=.5-l*l-s*s,T=.5-d*d-h*h,M=.5-m*m-v*v;return 70*((w<0?0:(w*=w)*w*t.dot(t.grad3[x],l,s))+(T<0?0:(T*=T)*T*t.dot(t.grad3[y],d,h))+(M<0?0:(M*=M)*M*t.dot(t.grad3[_],m,v)))})),(0,l.Z)(this,"noise3d",(function(e,n,r){var o,i,a,u,l,s,c=(e+n+r)*(1/3),f=Math.floor(e+c),d=Math.floor(n+c),h=Math.floor(r+c),m=1/6,v=(f+d+h)*m,p=e-(f-v),g=n-(d-v),x=r-(h-v);p>=g?g>=x?(o=1,i=0,a=0,u=1,l=1,s=0):p>=x?(o=1,i=0,a=0,u=1,l=0,s=1):(o=0,i=0,a=1,u=1,l=0,s=1):g<x?(o=0,i=0,a=1,u=0,l=1,s=1):p<x?(o=0,i=1,a=0,u=0,l=1,s=1):(o=0,i=1,a=0,u=1,l=1,s=0);var y=p-o+m,_=g-i+m,w=x-a+m,T=p-u+2*m,M=g-l+2*m,b=x-s+2*m,U=p-1+.5,S=g-1+.5,D=x-1+.5,E=255&f,B=255&d,k=255&h,F=t.perm[E+t.perm[B+t.perm[k]]]%12,R=t.perm[E+o+t.perm[B+i+t.perm[k+a]]]%12,Z=t.perm[E+u+t.perm[B+l+t.perm[k+s]]]%12,C=t.perm[E+1+t.perm[B+1+t.perm[k+1]]]%12,P=.6-p*p-g*g-x*x,L=.6-y*y-_*_-w*w,A=.6-T*T-M*M-b*b,z=.6-U*U-S*S-D*D;return 32*((P<0?0:(P*=P)*P*t.dot3(t.grad3[F],p,g,x))+(L<0?0:(L*=L)*L*t.dot3(t.grad3[R],y,_,w))+(A<0?0:(A*=A)*A*t.dot3(t.grad3[Z],T,M,b))+(z<0?0:(z*=z)*z*t.dot3(t.grad3[C],U,S,D)))})),(0,l.Z)(this,"noise4d",(function(e,n,r,o){var i,a,u,l,s,c,f,d,h,m,v,p,g=t.grad4,x=t.simplex,y=t.perm,_=(Math.sqrt(5)-1)/4,w=(5-Math.sqrt(5))/20,T=(e+n+r+o)*_,M=Math.floor(e+T),b=Math.floor(n+T),U=Math.floor(r+T),S=Math.floor(o+T),D=(M+b+U+S)*w,E=e-(M-D),B=n-(b-D),k=r-(U-D),F=o-(S-D),R=(E>B?32:0)+(E>k?16:0)+(B>k?8:0)+(E>F?4:0)+(B>F?2:0)+(k>F?1:0),Z=E-(i=x[R][0]>=3?1:0)+w,C=B-(a=x[R][1]>=3?1:0)+w,P=k-(u=x[R][2]>=3?1:0)+w,L=F-(l=x[R][3]>=3?1:0)+w,A=E-(s=x[R][0]>=2?1:0)+2*w,z=B-(c=x[R][1]>=2?1:0)+2*w,V=k-(f=x[R][2]>=2?1:0)+2*w,H=F-(d=x[R][3]>=2?1:0)+2*w,I=E-(h=x[R][0]>=1?1:0)+3*w,W=B-(m=x[R][1]>=1?1:0)+3*w,j=k-(v=x[R][2]>=1?1:0)+3*w,G=F-(p=x[R][3]>=1?1:0)+3*w,q=E-1+4*w,N=B-1+4*w,O=k-1+4*w,Y=F-1+4*w,X=255&M,$=255&b,Q=255&U,J=255&S,K=y[X+y[$+y[Q+y[J]]]]%32,ee=y[X+i+y[$+a+y[Q+u+y[J+l]]]]%32,te=y[X+s+y[$+c+y[Q+f+y[J+d]]]]%32,ne=y[X+h+y[$+m+y[Q+v+y[J+p]]]]%32,re=y[X+1+y[$+1+y[Q+1+y[J+1]]]]%32,oe=.6-E*E-B*B-k*k-F*F,ie=.6-Z*Z-C*C-P*P-L*L,ae=.6-A*A-z*z-V*V-H*H,ue=.6-I*I-W*W-j*j-G*G,le=.6-q*q-N*N-O*O-Y*Y;return 27*((oe<0?0:(oe*=oe)*oe*t.dot4(g[K],E,B,k,F))+(ie<0?0:(ie*=ie)*ie*t.dot4(g[ee],Z,C,P,L))+(ae<0?0:(ae*=ae)*ae*t.dot4(g[te],A,z,V,H))+(ue<0?0:(ue*=ue)*ue*t.dot4(g[ne],I,W,j,G))+(le<0?0:(le*=le)*le*t.dot4(g[re],q,N,O,Y)))}));for(var r=0;r<256;r++)this.p[r]=Math.floor(256*n.random());for(var o=0;o<512;o++)this.perm[o]=this.p[255&o]})),c=o.forwardRef((function(e,t){var n=e.intensity,a=void 0===n?1:n,u=e.decay,l=e.decayRate,c=void 0===l?.65:l,f=e.maxYaw,d=void 0===f?.1:f,h=e.maxPitch,m=void 0===h?.1:h,v=e.maxRoll,p=void 0===v?.1:v,g=e.yawFrequency,x=void 0===g?.1:g,y=e.pitchFrequency,_=void 0===y?.1:y,w=e.rollFrequency,T=void 0===w?.1:w,M=(0,i.y)((function(e){return e.camera})),b=(0,i.y)((function(e){return e.controls})),U=o.useRef(a),S=o.useRef(M.rotation.clone()),D=o.useState((function(){return new s})),E=(0,r.Z)(D,1)[0],B=o.useState((function(){return new s})),k=(0,r.Z)(B,1)[0],F=o.useState((function(){return new s})),R=(0,r.Z)(F,1)[0],Z=function(){(U.current<0||U.current>1)&&(U.current=U.current<0?0:1)};return o.useImperativeHandle(t,(function(){return{getIntensity:function(){return U.current},setIntensity:function(e){U.current=e,Z()}}}),[]),o.useEffect((function(){if(b){var e=function(){S.current=M.rotation.clone()};return b.addEventListener("change",e),e(),function(){b.removeEventListener("change",e)}}}),[M,b]),(0,i.z)((function(e,t){var n=Math.pow(U.current,2),r=d*n*E.noise(e.clock.elapsedTime*x,1),o=m*n*k.noise(e.clock.elapsedTime*_,1),i=p*n*R.noise(e.clock.elapsedTime*T,1);M.rotation.set(S.current.x+o,S.current.y+r,S.current.z+i),u&&U.current>0&&(U.current-=c*t,Z())})),null}))},1115:function(e,t,n){n.d(t,{qA:function(){return U}});var r=n(9439),o=n(4925),i=n(7462),a=n(2791),u=n(2654),l=n(7760),s=n(5671),c=n(3144),f=n(1752),d=n(1120),h=n(136),m=n(7277),v=function(e){(0,h.Z)(n,e);var t=(0,m.Z)(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).type=l.HalfFloatType,r}return(0,c.Z)(n,[{key:"parse",value:function(e){var t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},n=function(e,t,n){t=t||1024;for(var r=e.pos,o=-1,i=0,a="",u=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));0>(o=u.indexOf("\n"))&&i<t&&r<e.byteLength;)a+=u,i+=u.length,r+=128,u+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<o&&(!1!==n&&(e.pos+=i+o+1),a+u.slice(0,o))},r=function(e,t,n,r){var o=e[t+3],i=Math.pow(2,o-128)/255;n[r+0]=e[t+0]*i,n[r+1]=e[t+1]*i,n[r+2]=e[t+2]*i,n[r+3]=1},o=function(e,t,n,r){var o=e[t+3],i=Math.pow(2,o-128)/255;n[r+0]=l.DataUtils.toHalfFloat(Math.min(e[t+0]*i,65504)),n[r+1]=l.DataUtils.toHalfFloat(Math.min(e[t+1]*i,65504)),n[r+2]=l.DataUtils.toHalfFloat(Math.min(e[t+2]*i,65504)),n[r+3]=l.DataUtils.toHalfFloat(1)},i=new Uint8Array(e);i.pos=0;var a=function(e){var r,o,i=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,a=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,u=/^\s*FORMAT=(\S+)\s*$/,l=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,s={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(r=n(e)))return t(1,"no header found");if(!(o=r.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(s.valid|=1,s.programtype=o[1],s.string+=r+"\n";!1!==(r=n(e));)if(s.string+=r+"\n","#"!==r.charAt(0)){if((o=r.match(i))&&(s.gamma=parseFloat(o[1])),(o=r.match(a))&&(s.exposure=parseFloat(o[1])),(o=r.match(u))&&(s.valid|=2,s.format=o[1]),(o=r.match(l))&&(s.valid|=4,s.height=parseInt(o[1],10),s.width=parseInt(o[2],10)),2&s.valid&&4&s.valid)break}else s.comments+=r+"\n";return 2&s.valid?4&s.valid?s:t(3,"missing image size specifier"):t(3,"missing format specifier")}(i);if(-1!==a){var u=a.width,s=a.height,c=function(e,n,r){var o=n;if(o<8||o>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(o!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");var i=new Uint8Array(4*n*r);if(!i.length)return t(4,"unable to allocate buffer space");for(var a=0,u=0,l=4*o,s=new Uint8Array(4),c=new Uint8Array(l),f=r;f>0&&u<e.byteLength;){if(u+4>e.byteLength)return t(1);if(s[0]=e[u++],s[1]=e[u++],s[2]=e[u++],s[3]=e[u++],2!=s[0]||2!=s[1]||(s[2]<<8|s[3])!=o)return t(3,"bad rgbe scanline format");for(var d=0,h=void 0;d<l&&u<e.byteLength;){var m=(h=e[u++])>128;if(m&&(h-=128),0===h||d+h>l)return t(3,"bad scanline data");if(m)for(var v=e[u++],p=0;p<h;p++)c[d++]=v;else c.set(e.subarray(u,u+h),d),d+=h,u+=h}for(var g=o,x=0;x<g;x++){var y=0;i[a]=c[x+y],y+=o,i[a+1]=c[x+y],y+=o,i[a+2]=c[x+y],y+=o,i[a+3]=c[x+y],a+=4}f--}return i}(i.subarray(i.pos),u,s);if(-1!==c){var f,d,h;switch(this.type){case l.FloatType:h=c.length/4;for(var m=new Float32Array(4*h),v=0;v<h;v++)r(c,4*v,m,4*v);f=m,d=l.FloatType;break;case l.HalfFloatType:h=c.length/4;for(var p=new Uint16Array(4*h),g=0;g<h;g++)o(c,4*g,p,4*g);f=p,d=l.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:u,height:s,data:f,header:a.string,gamma:a.gamma,exposure:a.exposure,type:d}}}return null}},{key:"setDataType",value:function(e){return this.type=e,this}},{key:"load",value:function(e,t,r,o){return(0,f.Z)((0,d.Z)(n.prototype),"load",this).call(this,e,(function(e,n){switch(e.type){case l.FloatType:case l.HalfFloatType:e.encoding=l.LinearEncoding,e.minFilter=l.LinearFilter,e.magFilter=l.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),r,o)}}]),n}(l.DataTextureLoader),p=function(e){(0,h.Z)(n,e);var t=(0,m.Z)(n);function n(e,r){var o,i;(0,s.Z)(this,n);var a,u=(a=e)&&a.isCubeTexture,c=(null!=(o=u?null===(i=e.image[0])||void 0===i?void 0:i.width:e.image.width)?o:1024)/4,f=Math.floor(Math.log2(c)),d=Math.pow(2,f),h=3*Math.max(d,112),m=4*d,v=[u?"#define ENVMAP_TYPE_CUBE":"","#define CUBEUV_TEXEL_WIDTH ".concat(1/h),"#define CUBEUV_TEXEL_HEIGHT ".concat(1/m),"#define CUBEUV_MAX_MIP ".concat(f,".0")].join("\n")+"\n        #define ENVMAP_TYPE_CUBE_UV\n        varying vec3 vWorldPosition;\n        uniform float radius;\n        uniform float height;\n        uniform float angle;\n        #ifdef ENVMAP_TYPE_CUBE\n            uniform samplerCube map;\n        #else\n            uniform sampler2D map;\n        #endif\n        // From: https://www.shadertoy.com/view/4tsBD7\n        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) \n        {\n            float d = dot ( rd, n );\n            \n            if( d > 0.0 ) { return 1e6; }\n            \n            vec3  o = ro - c;\n            float t = - dot( n, o ) / d;\n            vec3  q = o + rd * t;\n            \n            return ( dot( q, q ) < r * r ) ? t : 1e6;\n        }\n        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm\n        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) \n        {\n            vec3 oc = ro - ce;\n            float b = dot( oc, rd );\n            float c = dot( oc, oc ) - ra * ra;\n            float h = b * b - c;\n            \n            if( h < 0.0 ) { return -1.0; }\n            \n            h = sqrt( h );\n            \n            return - b + h;\n        }\n        vec3 project() \n        {\n            vec3 p = normalize( vWorldPosition );\n            vec3 camPos = cameraPosition;\n            camPos.y -= height;\n            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );\n            if( intersection > 0.0 ) {\n                \n                vec3 h = vec3( 0.0, - height, 0.0 );\n                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );\n                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;\n            } else {\n                p = vec3( 0.0, 1.0, 0.0 );\n            }\n            return p;\n        }\n        #include <common>\n        #include <cube_uv_reflection_fragment>\n        void main() \n        {\n            vec3 projectedWorldPosition = project();\n            \n            #ifdef ENVMAP_TYPE_CUBE\n                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;\n            #else\n                vec3 direction = normalize( projectedWorldPosition );\n                vec2 uv = equirectUv( direction );\n                vec3 outcolor = texture2D( map, uv ).rgb;\n            #endif\n            gl_FragColor = vec4( outcolor, 1.0 );\n            #include <tonemapping_fragment>\n            #include <encodings_fragment>\n        }\n        ",p={map:{value:e},height:{value:(null===r||void 0===r?void 0:r.height)||15},radius:{value:(null===r||void 0===r?void 0:r.radius)||100}},g=new l.IcosahedronGeometry(1,16),x=new l.ShaderMaterial({uniforms:p,fragmentShader:v,vertexShader:"\n        varying vec3 vWorldPosition;\n        void main() \n        {\n            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );\n            vWorldPosition = worldPosition.xyz;\n            \n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n        ",side:l.DoubleSide});return t.call(this,g,x)}return(0,c.Z)(n,[{key:"radius",get:function(){return this.material.uniforms.radius.value},set:function(e){this.material.uniforms.radius.value=e}},{key:"height",get:function(){return this.material.uniforms.height.value},set:function(e){this.material.uniforms.height.value=e}}]),n}(l.Mesh),g={sunset:"venice/venice_sunset_1k.hdr",dawn:"kiara/kiara_1_dawn_1k.hdr",night:"dikhololo/dikhololo_night_1k.hdr",warehouse:"empty-wharehouse/empty_warehouse_01_1k.hdr",forest:"forrest-slope/forest_slope_1k.hdr",apartment:"lebombo/lebombo_1k.hdr",studio:"studio-small-3/studio_small_03_1k.hdr",city:"potsdamer-platz/potsdamer_platz_1k.hdr",park:"rooitou/rooitou_park_1k.hdr",lobby:"st-fagans/st_fagans_interior_1k.hdr"},x=["background","scene"],y=function(e){return(t=e).current&&t.current.isScene?e.current:e;var t};function _(e){var t=e.scene,n=e.background,r=void 0!==n&&n,o=e.map,i=(0,u.y)((function(e){return e.scene}));return a.useLayoutEffect((function(){if(o){var e=y(t||i),n=e.background,a=e.environment;return"only"!==r&&(e.environment=o),r&&(e.background=o),function(){"only"!==r&&(e.environment=a),r&&(e.background=n)}}}),[i,t,o,r]),null}function w(e){var t=e.files,n=void 0===t?["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"]:t,r=e.path,o=void 0===r?"":r,i=e.preset,a=void 0===i?void 0:i,s=e.encoding,c=void 0===s?void 0:s,f=e.extensions;if(a){if(!(a in g))throw new Error("Preset must be one of: "+Object.keys(g).join(", "));n=g[a],o="https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/hdris/"}var d=Array.isArray(n),h=d?l.CubeTextureLoader:v,m=(0,u.C)(h,d?[n]:n,(function(e){e.setPath(o),f&&f(e)})),p=d?m[0]:m;return p.mapping=d?l.CubeReflectionMapping:l.EquirectangularReflectionMapping,p.encoding=(null!==c&&void 0!==c?c:d)?l.sRGBEncoding:l.LinearEncoding,p}function T(e){var t=e.background,n=void 0!==t&&t,r=e.scene,i=w((0,o.Z)(e,x)),l=(0,u.y)((function(e){return e.scene}));return a.useLayoutEffect((function(){var e=y(r||l),t=e.background,o=e.environment;return"only"!==n&&(e.environment=i),n&&(e.background=i),function(){"only"!==n&&(e.environment=o),n&&(e.background=t)}}),[i,n,r,l]),null}function M(e){var t=e.children,n=e.near,o=void 0===n?1:n,i=e.far,s=void 0===i?1e3:i,c=e.resolution,f=void 0===c?256:c,d=e.frames,h=void 0===d?1:d,m=e.map,v=e.background,p=void 0!==v&&v,g=e.scene,x=e.files,w=e.path,M=e.preset,b=void 0===M?void 0:M,U=e.extensions,S=(0,u.y)((function(e){return e.gl})),D=(0,u.y)((function(e){return e.scene})),E=a.useRef(null),B=a.useState((function(){return new l.Scene})),k=(0,r.Z)(B,1)[0],F=a.useMemo((function(){var e=new l.WebGLCubeRenderTarget(f);return e.texture.type=l.HalfFloatType,e}),[f]);a.useLayoutEffect((function(){1===h&&E.current.update(S,k);var e=y(g||D),t=e.background,n=e.environment;return"only"!==p&&(e.environment=F.texture),p&&(e.background=F.texture),function(){"only"!==p&&(e.environment=n),p&&(e.background=t)}}),[t,k,F.texture,g,D,p,h,S]);var R=1;return(0,u.z)((function(){(h===1/0||R<h)&&(E.current.update(S,k),R++)})),a.createElement(a.Fragment,null,(0,u.g)(a.createElement(a.Fragment,null,t,a.createElement("cubeCamera",{ref:E,args:[o,s,F]}),x||b?a.createElement(T,{background:!0,files:x,preset:b,path:w,extensions:U}):m?a.createElement(_,{background:!0,map:m,extensions:U}):null),k))}function b(e){var t,n,r,o,l=w(e),s=e.map||l;a.useMemo((function(){(0,u.e)({GroundProjectedEnvImpl:p})}),[]);var c=a.useMemo((function(){return[s]}),[s]),f=null==(t=e.ground)?void 0:t.height,d=null==(n=e.ground)?void 0:n.radius,h=null!==(r=null==(o=e.ground)?void 0:o.scale)&&void 0!==r?r:1e3;return a.createElement(a.Fragment,null,a.createElement(_,(0,i.Z)({},e,{map:s})),a.createElement("groundProjectedEnvImpl",{args:c,scale:h,height:f,radius:d}))}function U(e){return e.ground?a.createElement(b,e):e.map?a.createElement(_,e):e.children?a.createElement(M,e):a.createElement(T,e)}},8843:function(e,t,n){n.d(t,{Q:function(){return x}});var r=n(9439),o=n(4925),i=n(7462),a=n(2791),u=n(7760),l=n(2654),s=n(3599),c=n(5671),f=n(3144),d=n(136),h=n(7277),m=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new u.Vector2;return(0,c.Z)(this,n),(e=t.call(this,{uniforms:{inputBuffer:new u.Uniform(null),depthBuffer:new u.Uniform(null),resolution:new u.Uniform(new u.Vector2),texelSize:new u.Uniform(new u.Vector2),halfTexelSize:new u.Uniform(new u.Vector2),kernel:new u.Uniform(0),scale:new u.Uniform(1),cameraNear:new u.Uniform(0),cameraFar:new u.Uniform(1),minDepthThreshold:new u.Uniform(0),maxDepthThreshold:new u.Uniform(1),depthScale:new u.Uniform(0),depthToBlurRatioBias:new u.Uniform(.25)},fragmentShader:"#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <encodings_fragment>\n        }",vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:u.NoBlending,depthWrite:!1,depthTest:!1})).toneMapped=!1,e.setTexelSize(r.x,r.y),e.kernel=new Float32Array([0,1,2,2,3]),e}return(0,f.Z)(n,[{key:"setTexelSize",value:function(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}},{key:"setResolution",value:function(e){this.uniforms.resolution.value.copy(e)}}]),n}(u.ShaderMaterial),v=function(){function e(t){var n=t.gl,r=t.resolution,o=t.width,i=void 0===o?500:o,a=t.height,l=void 0===a?500:a,s=t.minDepthThreshold,f=void 0===s?0:s,d=t.maxDepthThreshold,h=void 0===d?1:d,v=t.depthScale,p=void 0===v?0:v,g=t.depthToBlurRatioBias,x=void 0===g?.25:g;(0,c.Z)(this,e),this.renderToScreen=!1,this.renderTargetA=new u.WebGLRenderTarget(r,r,{minFilter:u.LinearFilter,magFilter:u.LinearFilter,stencilBuffer:!1,depthBuffer:!1,encoding:n.outputEncoding}),this.renderTargetB=this.renderTargetA.clone(),this.convolutionMaterial=new m,this.convolutionMaterial.setTexelSize(1/i,1/l),this.convolutionMaterial.setResolution(new u.Vector2(i,l)),this.scene=new u.Scene,this.camera=new u.Camera,this.convolutionMaterial.uniforms.minDepthThreshold.value=f,this.convolutionMaterial.uniforms.maxDepthThreshold.value=h,this.convolutionMaterial.uniforms.depthScale.value=p,this.convolutionMaterial.uniforms.depthToBlurRatioBias.value=x,this.convolutionMaterial.defines.USE_DEPTH=p>0;var y=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),_=new Float32Array([0,0,2,0,0,2]),w=new u.BufferGeometry;w.setAttribute("position",new u.BufferAttribute(y,3)),w.setAttribute("uv",new u.BufferAttribute(_,2)),this.screen=new u.Mesh(w,this.convolutionMaterial),this.screen.frustumCulled=!1,this.scene.add(this.screen)}return(0,f.Z)(e,[{key:"render",value:function(e,t,n){var r=this.scene,o=this.camera,i=this.renderTargetA,a=this.renderTargetB,u=this.convolutionMaterial,l=u.uniforms;l.depthBuffer.value=t.depthTexture;var s,c,f,d=u.kernel,h=t;for(c=0,f=d.length-1;c<f;++c)s=0===(1&c)?i:a,l.kernel.value=d[c],l.inputBuffer.value=h.texture,e.setRenderTarget(s),e.render(r,o),h=s;l.kernel.value=d[c],l.inputBuffer.value=h.texture,e.setRenderTarget(this.renderToScreen?null:n),e.render(r,o)}}]),e}(),p=function(e){(0,d.Z)(n,e);var t=(0,h.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.Z)(this,n),(e=t.call(this,r))._tDepth={value:null},e._distortionMap={value:null},e._tDiffuse={value:null},e._tDiffuseBlur={value:null},e._textureMatrix={value:null},e._hasBlur={value:!1},e._mirror={value:0},e._mixBlur={value:0},e._blurStrength={value:.5},e._minDepthThreshold={value:.9},e._maxDepthThreshold={value:1},e._depthScale={value:0},e._depthToBlurRatioBias={value:.25},e._distortion={value:1},e._mixContrast={value:1},e.setValues(r),e}return(0,f.Z)(n,[{key:"onBeforeCompile",value:function(e){var t;null!=(t=e.defines)&&t.USE_UV||(e.defines.USE_UV=""),e.uniforms.hasBlur=this._hasBlur,e.uniforms.tDiffuse=this._tDiffuse,e.uniforms.tDepth=this._tDepth,e.uniforms.distortionMap=this._distortionMap,e.uniforms.tDiffuseBlur=this._tDiffuseBlur,e.uniforms.textureMatrix=this._textureMatrix,e.uniforms.mirror=this._mirror,e.uniforms.mixBlur=this._mixBlur,e.uniforms.mixStrength=this._blurStrength,e.uniforms.minDepthThreshold=this._minDepthThreshold,e.uniforms.maxDepthThreshold=this._maxDepthThreshold,e.uniforms.depthScale=this._depthScale,e.uniforms.depthToBlurRatioBias=this._depthToBlurRatioBias,e.uniforms.distortion=this._distortion,e.uniforms.mixContrast=this._mixContrast,e.vertexShader="\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ".concat(e.vertexShader),e.vertexShader=e.vertexShader.replace("#include <project_vertex>","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),e.fragmentShader="\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ".concat(e.fragmentShader),e.fragmentShader=e.fragmentShader.replace("#include <emissivemap_fragment>","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}},{key:"tDiffuse",get:function(){return this._tDiffuse.value},set:function(e){this._tDiffuse.value=e}},{key:"tDepth",get:function(){return this._tDepth.value},set:function(e){this._tDepth.value=e}},{key:"distortionMap",get:function(){return this._distortionMap.value},set:function(e){this._distortionMap.value=e}},{key:"tDiffuseBlur",get:function(){return this._tDiffuseBlur.value},set:function(e){this._tDiffuseBlur.value=e}},{key:"textureMatrix",get:function(){return this._textureMatrix.value},set:function(e){this._textureMatrix.value=e}},{key:"hasBlur",get:function(){return this._hasBlur.value},set:function(e){this._hasBlur.value=e}},{key:"mirror",get:function(){return this._mirror.value},set:function(e){this._mirror.value=e}},{key:"mixBlur",get:function(){return this._mixBlur.value},set:function(e){this._mixBlur.value=e}},{key:"mixStrength",get:function(){return this._blurStrength.value},set:function(e){this._blurStrength.value=e}},{key:"minDepthThreshold",get:function(){return this._minDepthThreshold.value},set:function(e){this._minDepthThreshold.value=e}},{key:"maxDepthThreshold",get:function(){return this._maxDepthThreshold.value},set:function(e){this._maxDepthThreshold.value=e}},{key:"depthScale",get:function(){return this._depthScale.value},set:function(e){this._depthScale.value=e}},{key:"depthToBlurRatioBias",get:function(){return this._depthToBlurRatioBias.value},set:function(e){this._depthToBlurRatioBias.value=e}},{key:"distortion",get:function(){return this._distortion.value},set:function(e){this._distortion.value=e}},{key:"mixContrast",get:function(){return this._mixContrast.value},set:function(e){this._mixContrast.value=e}}]),n}(u.MeshStandardMaterial),g=["mixBlur","mixStrength","resolution","blur","minDepthThreshold","maxDepthThreshold","depthScale","depthToBlurRatioBias","mirror","distortion","mixContrast","distortionMap","reflectorOffset"];(0,l.e)({MeshReflectorMaterialImpl:p});var x=a.forwardRef((function(e,t){var n=e.mixBlur,c=void 0===n?0:n,f=e.mixStrength,d=void 0===f?1:f,h=e.resolution,m=void 0===h?256:h,p=e.blur,x=void 0===p?[0,0]:p,y=e.minDepthThreshold,_=void 0===y?.9:y,w=e.maxDepthThreshold,T=void 0===w?1:w,M=e.depthScale,b=void 0===M?0:M,U=e.depthToBlurRatioBias,S=void 0===U?.25:U,D=e.mirror,E=void 0===D?0:D,B=e.distortion,k=void 0===B?1:B,F=e.mixContrast,R=void 0===F?1:F,Z=e.distortionMap,C=e.reflectorOffset,P=void 0===C?0:C,L=(0,o.Z)(e,g),A=(0,l.y)((function(e){return e.gl})),z=(0,l.y)((function(e){return e.camera})),V=(0,l.y)((function(e){return e.scene})),H=(x=Array.isArray(x)?x:[x,x])[0]+x[1]>0,I=a.useRef(null),W=a.useState((function(){return new u.Plane})),j=(0,r.Z)(W,1)[0],G=a.useState((function(){return new u.Vector3})),q=(0,r.Z)(G,1)[0],N=a.useState((function(){return new u.Vector3})),O=(0,r.Z)(N,1)[0],Y=a.useState((function(){return new u.Vector3})),X=(0,r.Z)(Y,1)[0],$=a.useState((function(){return new u.Matrix4})),Q=(0,r.Z)($,1)[0],J=a.useState((function(){return new u.Vector3(0,0,-1)})),K=(0,r.Z)(J,1)[0],ee=a.useState((function(){return new u.Vector4})),te=(0,r.Z)(ee,1)[0],ne=a.useState((function(){return new u.Vector3})),re=(0,r.Z)(ne,1)[0],oe=a.useState((function(){return new u.Vector3})),ie=(0,r.Z)(oe,1)[0],ae=a.useState((function(){return new u.Vector4})),ue=(0,r.Z)(ae,1)[0],le=a.useState((function(){return new u.Matrix4})),se=(0,r.Z)(le,1)[0],ce=a.useState((function(){return new u.PerspectiveCamera})),fe=(0,r.Z)(ce,1)[0],de=a.useCallback((function(){var e,t=I.current.parent||(null==(e=I.current)?void 0:e.__r3f.parent);if(t&&(O.setFromMatrixPosition(t.matrixWorld),X.setFromMatrixPosition(z.matrixWorld),Q.extractRotation(t.matrixWorld),q.set(0,0,1),q.applyMatrix4(Q),O.addScaledVector(q,P),re.subVectors(O,X),!(re.dot(q)>0))){re.reflect(q).negate(),re.add(O),Q.extractRotation(z.matrixWorld),K.set(0,0,-1),K.applyMatrix4(Q),K.add(X),ie.subVectors(O,K),ie.reflect(q).negate(),ie.add(O),fe.position.copy(re),fe.up.set(0,1,0),fe.up.applyMatrix4(Q),fe.up.reflect(q),fe.lookAt(ie),fe.far=z.far,fe.updateMatrixWorld(),fe.projectionMatrix.copy(z.projectionMatrix),se.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),se.multiply(fe.projectionMatrix),se.multiply(fe.matrixWorldInverse),se.multiply(t.matrixWorld),j.setFromNormalAndCoplanarPoint(q,O),j.applyMatrix4(fe.matrixWorldInverse),te.set(j.normal.x,j.normal.y,j.normal.z,j.constant);var n=fe.projectionMatrix;ue.x=(Math.sign(te.x)+n.elements[8])/n.elements[0],ue.y=(Math.sign(te.y)+n.elements[9])/n.elements[5],ue.z=-1,ue.w=(1+n.elements[10])/n.elements[14],te.multiplyScalar(2/te.dot(ue)),n.elements[2]=te.x,n.elements[6]=te.y,n.elements[10]=te.z+1,n.elements[14]=te.w}}),[z,P]),he=a.useMemo((function(){var e={minFilter:u.LinearFilter,magFilter:u.LinearFilter,encoding:A.outputEncoding,type:u.HalfFloatType},t=new u.WebGLRenderTarget(m,m,e);t.depthBuffer=!0,t.depthTexture=new u.DepthTexture(m,m),t.depthTexture.format=u.DepthFormat,t.depthTexture.type=u.UnsignedShortType;var n=new u.WebGLRenderTarget(m,m,e);return[t,n,new v({gl:A,resolution:m,width:x[0],height:x[1],minDepthThreshold:_,maxDepthThreshold:T,depthScale:b,depthToBlurRatioBias:S}),{mirror:E,textureMatrix:se,mixBlur:c,tDiffuse:t.texture,tDepth:t.depthTexture,tDiffuseBlur:n.texture,hasBlur:H,mixStrength:d,minDepthThreshold:_,maxDepthThreshold:T,depthScale:b,depthToBlurRatioBias:S,distortion:k,distortionMap:Z,mixContrast:R,"defines-USE_BLUR":H?"":void 0,"defines-USE_DEPTH":b>0?"":void 0,"defines-USE_DISTORTION":Z?"":void 0}]}),[A,x,se,m,E,H,c,d,_,T,b,S,k,Z,R]),me=(0,r.Z)(he,4),ve=me[0],pe=me[1],ge=me[2],xe=me[3];return(0,l.z)((function(){var e,t=I.current.parent||(null==(e=I.current)?void 0:e.__r3f.parent);if(t){t.visible=!1;var n=A.xr.enabled,r=A.shadowMap.autoUpdate;de(),A.xr.enabled=!1,A.shadowMap.autoUpdate=!1,A.setRenderTarget(ve),A.state.buffers.depth.setMask(!0),A.autoClear||A.clear(),A.render(V,fe),H&&ge.render(A,ve,pe),A.xr.enabled=n,A.shadowMap.autoUpdate=r,t.visible=!0,A.setRenderTarget(null)}})),a.createElement("meshReflectorMaterialImpl",(0,i.Z)({attach:"material",key:"key"+xe["defines-USE_BLUR"]+xe["defines-USE_DEPTH"]+xe["defines-USE_DISTORTION"],ref:(0,s.Z)([I,t])},xe,L))}))},4637:function(e,t,n){n.d(t,{z:function(){return s}});var r=n(4925),o=n(7462),i=n(2654),a=n(2791),u=n(3291),l=["makeDefault","camera","regress","domElement","enableDamping","onChange","onStart","onEnd"],s=a.forwardRef((function(e,t){var n=e.makeDefault,s=e.camera,c=e.regress,f=e.domElement,d=e.enableDamping,h=void 0===d||d,m=e.onChange,v=e.onStart,p=e.onEnd,g=(0,r.Z)(e,l),x=(0,i.y)((function(e){return e.invalidate})),y=(0,i.y)((function(e){return e.camera})),_=(0,i.y)((function(e){return e.gl})),w=(0,i.y)((function(e){return e.events})),T=(0,i.y)((function(e){return e.set})),M=(0,i.y)((function(e){return e.get})),b=(0,i.y)((function(e){return e.performance})),U=s||y,S=f||w.connected||_.domElement,D=a.useMemo((function(){return new u.z(U)}),[U]);return(0,i.z)((function(){D.enabled&&D.update()}),-1),a.useEffect((function(){return D.connect(S),function(){D.dispose()}}),[S,c,D,x]),a.useEffect((function(){var e=function(e){x(),c&&b.regress(),m&&m(e)};return D.addEventListener("change",e),v&&D.addEventListener("start",v),p&&D.addEventListener("end",p),function(){v&&D.removeEventListener("start",v),p&&D.removeEventListener("end",p),D.removeEventListener("change",e)}}),[m,v,p,D,x]),a.useEffect((function(){if(n){var e=M().controls;return T({controls:D}),function(){return T({controls:e})}}}),[n,D]),a.createElement("primitive",(0,o.Z)({ref:t,object:D,enableDamping:h},g))}))},7543:function(e,t,n){n.d(t,{j:function(){return o}});var r=n(2791);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pointer",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto";r.useEffect((function(){if(e)return document.body.style.cursor=t,function(){document.body.style.cursor=n}}),[e])}},3599:function(e,t){t.Z=function(e){return function(t){e.forEach((function(e){"function"===typeof e?e(t):null!=e&&(e.current=t)}))}}}}]);
//# sourceMappingURL=567.6548f168.chunk.js.map