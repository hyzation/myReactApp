"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[699],{7699:function(e,t,r){r.r(t),r.d(t,{default:function(){return h}});var n=r(9439),o=r(2791),a=(r(4164),r(2654)),i=r(5892),c=r(4956),s=r(4637),u=r(7760),l=r(184),d=new u.Vector3,f=new u.Vector3;function m(){var e=(0,o.useState)(d.set(10,5,10)),t=(0,n.Z)(e,2),r=t[0],m=t[1],h=(0,o.useState)(!1),p=(0,n.Z)(h,2),v=p[0],x=p[1],g=function(){var e=(0,o.useRef)();(0,a.z)((function(){return e.current.rotation.x=e.current.rotation.y+=.01}));var t=(0,o.useState)(!1),i=(0,n.Z)(t,2),c=i[0];i[1];return(0,a.z)((function(e,t){v||(console.log(123),e.camera.fov=u.MathUtils.lerp(e.camera.fov,c?10:42,.02),e.camera.position.lerp(r,.02),e.camera.lookAt(f),e.camera.updateProjectionMatrix())})),(0,l.jsxs)("mesh",{castShadow:!0,receiveShadow:!0,ref:e,onClick:function(e){return console.log("click")},onPointerOver:function(e){return console.log("hover")},onPointerOut:function(e){return console.log("unhover")},children:[(0,l.jsx)("boxBufferGeometry",{attach:"geometry",args:[1,1,1]}),(0,l.jsx)("meshStandardMaterial",{color:"red"})]})},y=function(){var e=(0,o.useRef)();return(0,a.z)((function(){e.current.rotation.z-=.01})),(0,l.jsx)("group",{ref:e,children:(0,l.jsxs)("mesh",{castShadow:!0,receiveShadow:!0,position:[1,1,0],children:[(0,l.jsx)("sphereBufferGeometry",{args:[.25,24,24]}),(0,l.jsx)("meshStandardMaterial",{color:"blue"})]})})},w=function(e,t,r){x(!1),m(d.set(e,t,r))};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"sidebar",children:[(0,l.jsx)("button",{onClick:function(){w(0,0,10)},children:"Pos1"}),(0,l.jsx)("button",{onClick:function(){w(0,50,0)},children:"Pos2"}),(0,l.jsx)("button",{onClick:function(){w(-10,5,10)},children:"Pos3"})]}),(0,l.jsx)(i.Xz,{style:{width:"100%",height:"100vh"},onMouseDown:function(){x(!0)},shadows:!0,children:(0,l.jsxs)(o.Suspense,{fallback:(0,l.jsx)(c.V,{style:{color:"#000000",width:"100px"},center:!0,children:"\u52a0\u8f7d\u4e2d..."}),children:[(0,l.jsx)("directionalLight",{position:[0,5,0],castShadow:!0,"shadow-mapSize-height":1024,"shadow-mapSize-width":1024,"shadow-radius":10,"shadow-bias":-1e-4}),(0,l.jsx)(g,{}),(0,l.jsx)(y,{}),(0,l.jsx)("gridHelper",{}),(0,l.jsx)(s.z,{makeDefault:!0,minAzimuthAngle:0})]})})]})}function h(){return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(m,{})})}},4637:function(e,t,r){r.d(t,{z:function(){return u}});var n=r(4925),o=r(7462),a=r(2654),i=r(2791),c=r(3291),s=["makeDefault","camera","regress","domElement","enableDamping","onChange","onStart","onEnd"],u=i.forwardRef((function(e,t){var r=e.makeDefault,u=e.camera,l=e.regress,d=e.domElement,f=e.enableDamping,m=void 0===f||f,h=e.onChange,p=e.onStart,v=e.onEnd,x=(0,n.Z)(e,s),g=(0,a.y)((function(e){return e.invalidate})),y=(0,a.y)((function(e){return e.camera})),w=(0,a.y)((function(e){return e.gl})),b=(0,a.y)((function(e){return e.events})),E=(0,a.y)((function(e){return e.set})),j=(0,a.y)((function(e){return e.get})),M=(0,a.y)((function(e){return e.performance})),P=u||y,z=d||b.connected||w.domElement,C=i.useMemo((function(){return new c.z(P)}),[P]);return(0,a.z)((function(){C.enabled&&C.update()}),-1),i.useEffect((function(){return C.connect(z),function(){C.dispose()}}),[z,l,C,g]),i.useEffect((function(){var e=function(e){g(),l&&M.regress(),h&&h(e)};return C.addEventListener("change",e),p&&C.addEventListener("start",p),v&&C.addEventListener("end",v),function(){p&&C.removeEventListener("start",p),v&&C.removeEventListener("end",v),C.removeEventListener("change",e)}}),[h,p,v,C,g]),i.useEffect((function(){if(r){var e=j().controls;return E({controls:C}),function(){return E({controls:e})}}}),[r,C]),i.createElement("primitive",(0,o.Z)({ref:t,object:C,enableDamping:m},x))}))},4956:function(e,t,r){r.d(t,{V:function(){return b}});var n=r(1413),o=r(9439),a=r(4925),i=r(7462),c=r(2791),s=r(1250),u=r(7760),l=r(2654),d=["children","eps","style","className","prepend","center","fullscreen","portal","distanceFactor","sprite","transform","occlude","onOcclude","zIndexRange","calculatePosition","as","wrapperClass","pointerEvents"],f=new u.Vector3,m=new u.Vector3,h=new u.Vector3;function p(e,t,r){var n=f.setFromMatrixPosition(e.matrixWorld);n.project(t);var o=r.width/2,a=r.height/2;return[n.x*o+o,-n.y*a+a]}var v=function(e){return Math.abs(e)<1e-10?0:e};function x(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n="matrix3d(",o=0;16!==o;o++)n+=v(t[o]*e.elements[o])+(15!==o?",":")");return r+n}var g,y=(g=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],function(e){return x(e,g)}),w=function(e,t){return x(e,[1/(r=t),1/r,1/r,1,-1/r,-1/r,-1/r,-1,1/r,1/r,1/r,1,1,1,1,1],"translate(-50%,-50%)");var r},b=c.forwardRef((function(e,t){var r=e.children,x=e.eps,g=void 0===x?.001:x,b=e.style,E=e.className,j=e.prepend,M=e.center,P=e.fullscreen,z=e.portal,C=e.distanceFactor,S=e.sprite,k=void 0!==S&&S,W=e.transform,R=void 0!==W&&W,F=e.occlude,Z=e.onOcclude,L=e.zIndexRange,D=void 0===L?[16777271,0]:L,O=e.calculatePosition,I=void 0===O?p:O,N=e.as,V=void 0===N?"div":N,T=e.wrapperClass,A=e.pointerEvents,B=void 0===A?"auto":A,G=(0,a.Z)(e,d),_=(0,l.y)(),H=_.gl,U=_.camera,X=_.scene,q=_.size,J=_.raycaster,K=_.events,Q=c.useState((function(){return document.createElement(V)})),Y=(0,o.Z)(Q,1)[0],$=c.useRef(),ee=c.useRef(null),te=c.useRef(0),re=c.useRef([0,0]),ne=c.useRef(null),oe=c.useRef(null),ae=(null==z?void 0:z.current)||K.connected||H.domElement.parentNode;c.useLayoutEffect((function(){if(ee.current){var e=$.current=s.createRoot(Y);if(X.updateMatrixWorld(),R)Y.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{var t=I(ee.current,U,q);Y.style.cssText="position:absolute;top:0;left:0;transform:translate3d(".concat(t[0],"px,").concat(t[1],"px,0);transform-origin:0 0;")}return ae&&(j?ae.prepend(Y):ae.appendChild(Y)),function(){ae&&ae.removeChild(Y),e.unmount()}}}),[ae,R]),c.useLayoutEffect((function(){T&&(Y.className=T)}),[T]);var ie=c.useMemo((function(){return R?{position:"absolute",top:0,left:0,width:q.width,height:q.height,transformStyle:"preserve-3d",pointerEvents:"none"}:(0,n.Z)((0,n.Z)({position:"absolute",transform:M?"translate3d(-50%,-50%,0)":"none"},P&&{top:-q.height/2,left:-q.width/2,width:q.width,height:q.height}),b)}),[b,M,P,q,R]),ce=c.useMemo((function(){return{position:"absolute",pointerEvents:B}}),[B]);c.useLayoutEffect((function(){var e,n;R?null==(e=$.current)||e.render(c.createElement("div",{ref:ne,style:ie},c.createElement("div",{ref:oe,style:ce},c.createElement("div",{ref:t,className:E,style:b,children:r})))):null==(n=$.current)||n.render(c.createElement("div",{ref:t,style:ie,className:E,children:r}))}));var se=c.useRef(!0);return(0,l.z)((function(){if(ee.current){U.updateMatrixWorld(),ee.current.updateWorldMatrix(!0,!1);var e=R?re.current:I(ee.current,U,q);if(R||Math.abs(te.current-U.zoom)>g||Math.abs(re.current[0]-e[0])>g||Math.abs(re.current[1]-e[1])>g){var t=function(e,t){var r=f.setFromMatrixPosition(e.matrixWorld),n=m.setFromMatrixPosition(t.matrixWorld),o=r.sub(n),a=t.getWorldDirection(h);return o.angleTo(a)>Math.PI/2}(ee.current,U),r=!1;"boolean"===typeof F?!0===F&&(r=[X]):Array.isArray(F)&&(r=F.map((function(e){return e.current})));var n=se.current;if(r){var o=function(e,t,r,n){var o=f.setFromMatrixPosition(e.matrixWorld),a=o.clone();a.project(t),r.setFromCamera(a,t);var i=r.intersectObjects(n,!0);if(i.length){var c=i[0].distance;return o.distanceTo(r.ray.origin)<c}return!0}(ee.current,U,J,r);se.current=o&&!t}else se.current=!t;if(n!==se.current&&(Z?Z(!se.current):Y.style.display=se.current?"block":"none"),Y.style.zIndex="".concat(function(e,t,r){if(t instanceof u.PerspectiveCamera||t instanceof u.OrthographicCamera){var n=f.setFromMatrixPosition(e.matrixWorld),o=m.setFromMatrixPosition(t.matrixWorld),a=n.distanceTo(o),i=(r[1]-r[0])/(t.far-t.near),c=r[1]-i*t.far;return Math.round(i*a+c)}}(ee.current,U,D)),R){var a=q.width/2,i=q.height/2,c=U.projectionMatrix.elements[5]*i,s=U.isOrthographicCamera,l=U.top,d=U.left,p=U.bottom,x=U.right,b=y(U.matrixWorldInverse),E=s?"scale(".concat(c,")translate(").concat(v(-(x+d)/2),"px,").concat(v((l+p)/2),"px)"):"translateZ(".concat(c,"px)"),j=ee.current.matrixWorld;k&&((j=U.matrixWorldInverse.clone().transpose().copyPosition(j).scale(ee.current.scale)).elements[3]=j.elements[7]=j.elements[11]=0,j.elements[15]=1),Y.style.width=q.width+"px",Y.style.height=q.height+"px",Y.style.perspective=s?"":"".concat(c,"px"),ne.current&&oe.current&&(ne.current.style.transform="".concat(E).concat(b,"translate(").concat(a,"px,").concat(i,"px)"),oe.current.style.transform=w(j,1/((C||10)/400)))}else{var M=void 0===C?1:function(e,t){if(t instanceof u.OrthographicCamera)return t.zoom;if(t instanceof u.PerspectiveCamera){var r=f.setFromMatrixPosition(e.matrixWorld),n=m.setFromMatrixPosition(t.matrixWorld),o=t.fov*Math.PI/180,a=r.distanceTo(n);return 1/(2*Math.tan(o/2)*a)}return 1}(ee.current,U)*C;Y.style.transform="translate3d(".concat(e[0],"px,").concat(e[1],"px,0) scale(").concat(M,")")}re.current=e,te.current=U.zoom}}})),c.createElement("group",(0,i.Z)({},G,{ref:ee}))}))}}]);
//# sourceMappingURL=699.f0c60156.chunk.js.map