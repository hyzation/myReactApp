"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[69],{5069:function(e,t,r){r.r(t),r.d(t,{default:function(){return E}});var n=r(2791),a=r(4956),o=r(5892),i=r(9439),c=r(1413),s=r(2654),u=r(4925),l=r(7462),f=r(3291),d=["domElement","camera","makeDefault","onChange","onStart","onEnd"],m=n.forwardRef((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{enableDamping:!0},t=arguments.length>1?arguments[1]:void 0,r=e.domElement,a=e.camera,o=e.makeDefault,i=e.onChange,c=e.onStart,m=e.onEnd,p=(0,u.Z)(e,d),h=(0,s.y)((function(e){return e.invalidate})),v=(0,s.y)((function(e){return e.camera})),x=(0,s.y)((function(e){return e.gl})),g=(0,s.y)((function(e){return e.events})),y=(0,s.y)((function(e){return e.set})),M=(0,s.y)((function(e){return e.get})),E=r||g.connected||x.domElement,b=a||v,w=n.useMemo((function(){return new f.o(b)}),[b]);return n.useEffect((function(){w.connect(E);var e=function(e){h(),i&&i(e)};return w.addEventListener("change",e),c&&w.addEventListener("start",c),m&&w.addEventListener("end",m),function(){w.dispose(),w.removeEventListener("change",e),c&&w.removeEventListener("start",c),m&&w.removeEventListener("end",m)}}),[i,c,m,w,h,E]),n.useEffect((function(){if(o){var e=M().controls;return y({controls:w}),function(){return y({controls:e})}}}),[o,w]),(0,s.z)((function(){return w.update()}),-1),n.createElement("primitive",(0,l.Z)({ref:t,object:w,enableDamping:!0},p))})),p=r(184);(0,s.e)({MapControls:m});var h=function(e){var t=(0,n.useRef)(),r=(0,s.y)(),a=r.camera,o=r.gl;return(0,s.z)((function(){t.current.update()})),(0,p.jsx)(m,(0,c.Z)({ref:t,args:[a,o.domElement],enableDamping:!0,dampingFactor:.05,minDistance:100,maxDistance:500,maxPolarAngle:Math.PI/2,enableRotate:!0},e))};function v(){for(var e=new String,t=0;t<6;t++)e+=Math.floor(10*Math.random());return"#"+e}for(var x=[],g=0;g<50;g++){console.log(v());x.push((0,p.jsxs)("mesh",{position:[20*g,0,20*g],scale:[30,20,60],children:[(0,p.jsx)("boxBufferGeometry",{attach:"geometry",args:[1,1,1]}),(0,p.jsx)("meshPhongMaterial",{attach:"material",color:v(),flatShading:!0})]},g))}function y(){return(0,p.jsxs)("mesh",{position:[0,0,0],rotation:[-Math.PI/2,0,0],children:[(0,p.jsx)("planeBufferGeometry",{attach:"geometry",args:[1800,1800],ref:function(e){return e&&e.translate(0,.5,0)}}),(0,p.jsx)("meshPhongMaterial",{attach:"material",color:"rgb(19,93,270)",flatShading:!0})]})}function M(e){var t=(0,n.useState)(!1),r=(0,i.Z)(t,2),a=r[0];r[1];return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("pointLight",{position:[5,20,5]}),(0,p.jsx)(h,{screenSpacePanning:a}),(0,p.jsx)("directionalLight",{position:[1,1,1],color:"#ad0071"}),(0,p.jsx)("directionalLight",{position:[-1,-1,-1],color:"#ffd738"}),x,(0,p.jsx)(y,{})]})}function E(){return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(o.Xz,{style:{width:"100vw",height:"100vh"},camera:{position:[200,280,0]},children:(0,p.jsx)(n.Suspense,{fallback:(0,p.jsx)(a.V,{style:{color:"#000000",width:"100px"},center:!0,children:"\u52a0\u8f7d\u4e2d..."}),children:(0,p.jsx)(M,{})})})})}},4956:function(e,t,r){r.d(t,{V:function(){return E}});var n=r(1413),a=r(9439),o=r(4925),i=r(7462),c=r(2791),s=r(1250),u=r(7760),l=r(2654),f=["children","eps","style","className","prepend","center","fullscreen","portal","distanceFactor","sprite","transform","occlude","onOcclude","zIndexRange","calculatePosition","as","wrapperClass","pointerEvents"],d=new u.Vector3,m=new u.Vector3,p=new u.Vector3;function h(e,t,r){var n=d.setFromMatrixPosition(e.matrixWorld);n.project(t);var a=r.width/2,o=r.height/2;return[n.x*a+a,-n.y*o+o]}var v=function(e){return Math.abs(e)<1e-10?0:e};function x(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n="matrix3d(",a=0;16!==a;a++)n+=v(t[a]*e.elements[a])+(15!==a?",":")");return r+n}var g,y=(g=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],function(e){return x(e,g)}),M=function(e,t){return x(e,[1/(r=t),1/r,1/r,1,-1/r,-1/r,-1/r,-1,1/r,1/r,1/r,1,1,1,1,1],"translate(-50%,-50%)");var r},E=c.forwardRef((function(e,t){var r=e.children,x=e.eps,g=void 0===x?.001:x,E=e.style,b=e.className,w=e.prepend,j=e.center,P=e.fullscreen,C=e.portal,W=e.distanceFactor,F=e.sprite,R=void 0!==F&&F,L=e.transform,z=void 0!==L&&L,S=e.occlude,Z=e.onOcclude,I=e.zIndexRange,k=void 0===I?[16777271,0]:I,D=e.calculatePosition,N=void 0===D?h:D,O=e.as,T=void 0===O?"div":O,V=e.wrapperClass,A=e.pointerEvents,B=void 0===A?"auto":A,G=(0,o.Z)(e,f),_=(0,l.y)(),X=_.gl,q=_.camera,H=_.scene,J=_.size,K=_.raycaster,Q=_.events,U=c.useState((function(){return document.createElement(T)})),Y=(0,a.Z)(U,1)[0],$=c.useRef(),ee=c.useRef(null),te=c.useRef(0),re=c.useRef([0,0]),ne=c.useRef(null),ae=c.useRef(null),oe=(null==C?void 0:C.current)||Q.connected||X.domElement.parentNode;c.useLayoutEffect((function(){if(ee.current){var e=$.current=s.createRoot(Y);if(H.updateMatrixWorld(),z)Y.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{var t=N(ee.current,q,J);Y.style.cssText="position:absolute;top:0;left:0;transform:translate3d(".concat(t[0],"px,").concat(t[1],"px,0);transform-origin:0 0;")}return oe&&(w?oe.prepend(Y):oe.appendChild(Y)),function(){oe&&oe.removeChild(Y),e.unmount()}}}),[oe,z]),c.useLayoutEffect((function(){V&&(Y.className=V)}),[V]);var ie=c.useMemo((function(){return z?{position:"absolute",top:0,left:0,width:J.width,height:J.height,transformStyle:"preserve-3d",pointerEvents:"none"}:(0,n.Z)((0,n.Z)({position:"absolute",transform:j?"translate3d(-50%,-50%,0)":"none"},P&&{top:-J.height/2,left:-J.width/2,width:J.width,height:J.height}),E)}),[E,j,P,J,z]),ce=c.useMemo((function(){return{position:"absolute",pointerEvents:B}}),[B]);c.useLayoutEffect((function(){var e,n;z?null==(e=$.current)||e.render(c.createElement("div",{ref:ne,style:ie},c.createElement("div",{ref:ae,style:ce},c.createElement("div",{ref:t,className:b,style:E,children:r})))):null==(n=$.current)||n.render(c.createElement("div",{ref:t,style:ie,className:b,children:r}))}));var se=c.useRef(!0);return(0,l.z)((function(){if(ee.current){q.updateMatrixWorld(),ee.current.updateWorldMatrix(!0,!1);var e=z?re.current:N(ee.current,q,J);if(z||Math.abs(te.current-q.zoom)>g||Math.abs(re.current[0]-e[0])>g||Math.abs(re.current[1]-e[1])>g){var t=function(e,t){var r=d.setFromMatrixPosition(e.matrixWorld),n=m.setFromMatrixPosition(t.matrixWorld),a=r.sub(n),o=t.getWorldDirection(p);return a.angleTo(o)>Math.PI/2}(ee.current,q),r=!1;"boolean"===typeof S?!0===S&&(r=[H]):Array.isArray(S)&&(r=S.map((function(e){return e.current})));var n=se.current;if(r){var a=function(e,t,r,n){var a=d.setFromMatrixPosition(e.matrixWorld),o=a.clone();o.project(t),r.setFromCamera(o,t);var i=r.intersectObjects(n,!0);if(i.length){var c=i[0].distance;return a.distanceTo(r.ray.origin)<c}return!0}(ee.current,q,K,r);se.current=a&&!t}else se.current=!t;if(n!==se.current&&(Z?Z(!se.current):Y.style.display=se.current?"block":"none"),Y.style.zIndex="".concat(function(e,t,r){if(t instanceof u.PerspectiveCamera||t instanceof u.OrthographicCamera){var n=d.setFromMatrixPosition(e.matrixWorld),a=m.setFromMatrixPosition(t.matrixWorld),o=n.distanceTo(a),i=(r[1]-r[0])/(t.far-t.near),c=r[1]-i*t.far;return Math.round(i*o+c)}}(ee.current,q,k)),z){var o=J.width/2,i=J.height/2,c=q.projectionMatrix.elements[5]*i,s=q.isOrthographicCamera,l=q.top,f=q.left,h=q.bottom,x=q.right,E=y(q.matrixWorldInverse),b=s?"scale(".concat(c,")translate(").concat(v(-(x+f)/2),"px,").concat(v((l+h)/2),"px)"):"translateZ(".concat(c,"px)"),w=ee.current.matrixWorld;R&&((w=q.matrixWorldInverse.clone().transpose().copyPosition(w).scale(ee.current.scale)).elements[3]=w.elements[7]=w.elements[11]=0,w.elements[15]=1),Y.style.width=J.width+"px",Y.style.height=J.height+"px",Y.style.perspective=s?"":"".concat(c,"px"),ne.current&&ae.current&&(ne.current.style.transform="".concat(b).concat(E,"translate(").concat(o,"px,").concat(i,"px)"),ae.current.style.transform=M(w,1/((W||10)/400)))}else{var j=void 0===W?1:function(e,t){if(t instanceof u.OrthographicCamera)return t.zoom;if(t instanceof u.PerspectiveCamera){var r=d.setFromMatrixPosition(e.matrixWorld),n=m.setFromMatrixPosition(t.matrixWorld),a=t.fov*Math.PI/180,o=r.distanceTo(n);return 1/(2*Math.tan(a/2)*o)}return 1}(ee.current,q)*W;Y.style.transform="translate3d(".concat(e[0],"px,").concat(e[1],"px,0) scale(").concat(j,")")}re.current=e,te.current=q.zoom}}})),c.createElement("group",(0,i.Z)({},G,{ref:ee}))}))}}]);
//# sourceMappingURL=69.059a7fc5.chunk.js.map